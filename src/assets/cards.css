/* =============================================================================
   PRINTABLE CARDS â€” Adapted from pimpampum
   ============================================================================= */

@import url('https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap');

/* -- Card grid ------------------------------------------------------------ */

.card-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  justify-content: center;
  max-width: 210mm;
  margin: 0 auto;
}

@media print {
  body {
    background: white !important;
  }
  .sidebar, .menu-toggle, .player-bar, .no-print {
    display: none !important;
  }
  .main-content {
    margin-left: 0 !important;
    padding: 0 !important;
  }
  .card-grid {
    display: grid !important;
    grid-template-columns: repeat(3, 63mm);
    gap: 0 !important;
    max-width: none !important;
    margin: 0 auto !important;
    justify-content: center;
  }
  .card-grid > .print-card:nth-child(9n) {
    break-after: page;
  }

  .print-card {
    box-shadow: none;
    border-radius: 0;
  }
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  /* ---- Save-ink mode ---- */
  .save-ink .print-card {
    background: white;
  }
  .save-ink .print-card::before,
  .save-ink .print-card::after {
    display: none;
  }
  .save-ink .print-card .card-art {
    background: none;
  }
}

/* -- Base card ------------------------------------------------------------ */

.print-card {
  width: 63mm;
  height: 88mm;
  border-radius: 2mm;
  position: relative;
  overflow: hidden;
  page-break-inside: avoid;
  box-shadow: 0 4px 12px rgba(0,0,0,0.5);
  background: #f4e4c1;
  border: 4px solid #5c4a32;
  flex-shrink: 0;
}

/* -- Card type header colors ---------------------------------------------- */

.print-card.atac-fisic .card-header {
  background: #a63d2f;
  margin: -2.5mm -2.5mm 0 -2.5mm;
  padding: 2.5mm 3mm 1.5mm;
  border-radius: 0;
}
.print-card.atac-fisic .card-name,
.print-card.atac-fisic .card-subtitle { color: #f0e6d6; }
.print-card.atac-fisic .card-subtitle { color: rgba(240,230,214,0.8); }

.print-card.defensa .card-header {
  background: #2f6a8a;
  margin: -2.5mm -2.5mm 0 -2.5mm;
  padding: 2.5mm 3mm 1.5mm;
  border-radius: 0;
}
.print-card.defensa .card-name,
.print-card.defensa .card-subtitle { color: #f0e6d6; }
.print-card.defensa .card-subtitle { color: rgba(240,230,214,0.8); }

.print-card.focus .card-header {
  background: #8a7a2f;
  margin: -2.5mm -2.5mm 0 -2.5mm;
  padding: 2.5mm 3mm 1.5mm;
  border-radius: 0;
}
.print-card.focus .card-name,
.print-card.focus .card-subtitle { color: #f0e6d6; }
.print-card.focus .card-subtitle { color: rgba(240,230,214,0.8); }

.print-card.reliquia .card-header {
  background: #5c2f6a;
  margin: -2.5mm -2.5mm 0 -2.5mm;
  padding: 2.5mm 3mm 1.5mm;
  border-radius: 0;
}
.print-card.reliquia .card-name,
.print-card.reliquia .card-subtitle { color: #f0e6d6; }
.print-card.reliquia .card-subtitle { color: rgba(240,230,214,0.8); }

.print-card.objecte .card-header {
  background: #5c4a32;
  margin: -2.5mm -2.5mm 0 -2.5mm;
  padding: 2.5mm 3mm 1.5mm;
  border-radius: 0;
}
.print-card.objecte .card-name,
.print-card.objecte .card-subtitle { color: #f0e6d6; }
.print-card.objecte .card-subtitle { color: rgba(240,230,214,0.8); }

/* -- Parchment texture overlay -------------------------------------------- */

.print-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background:
    url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E"),
    linear-gradient(135deg, rgba(92,74,50,0.2) 0%, transparent 40%),
    linear-gradient(225deg, rgba(92,74,50,0.15) 0%, transparent 40%),
    linear-gradient(315deg, rgba(92,74,50,0.1) 0%, transparent 40%),
    linear-gradient(45deg, rgba(92,74,50,0.12) 0%, transparent 40%),
    radial-gradient(ellipse at 20% 80%, rgba(139,90,43,0.15) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 20%, rgba(139,90,43,0.1) 0%, transparent 40%),
    radial-gradient(ellipse at 60% 60%, rgba(160,120,60,0.08) 0%, transparent 60%);
  opacity: 0.6;
  pointer-events: none;
}

.print-card::after {
  content: '';
  position: absolute;
  inset: 0;
  background:
    url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='fiber'%3E%3CfeTurbulence type='turbulence' baseFrequency='0.15 0.4' numOctaves='2' seed='5'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23fiber)'/%3E%3C/svg%3E");
  opacity: 0.04;
  mix-blend-mode: multiply;
  pointer-events: none;
}

/* -- Card inner structure ------------------------------------------------- */

.print-card .card-inner {
  width: 100%;
  height: 100%;
  padding: 2.5mm;
  display: flex;
  flex-direction: column;
  position: relative;
  z-index: 1;
}

.print-card .card-frame {
  position: absolute;
  inset: 3mm;
  border: 3px solid #5c4a32;
  border-radius: 1mm;
  pointer-events: none;
  opacity: 0.8;
}

.print-card .card-header {
  text-align: center;
  padding: 2mm 3mm 1mm;
  position: relative;
  z-index: 1;
  height: 12mm;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.print-card .card-name {
  font-family: 'Cinzel Decorative', 'Cinzel', serif;
  font-size: 11pt;
  font-weight: 700;
  color: #2c1810;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  line-height: 1.1;
  text-shadow: 0.5px 0.5px 0 rgba(255,255,255,0.3);
}

.print-card .card-name.small {
  font-size: 9pt;
}

.print-card .card-subtitle {
  font-family: 'Cinzel Decorative', serif;
  font-size: 8pt;
  color: #4a3f2f;
  margin-top: 0.5mm;
  font-style: italic;
  letter-spacing: 0.5px;
}

.print-card .card-art {
  flex: 1;
  margin: 1.5mm 3mm;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  background: linear-gradient(to bottom, rgba(0,0,0,0.02), rgba(0,0,0,0.08));
  border-radius: 1mm;
  min-height: 28mm;
}

.print-card .card-art img {
  max-width: 90%;
  max-height: 90%;
  object-fit: contain;
  opacity: 0.85;
}

.print-card .card-effect {
  font-family: 'Cinzel Decorative', serif;
  font-size: 8pt;
  color: #2c1810;
  text-align: center;
  line-height: 1.3;
  padding: 2mm 2.5mm;
  margin: 0 3mm 1.5mm;
  background: rgba(255,255,255,0.4);
  border: 1px solid rgba(92,74,50,0.3);
  border-radius: 1mm;
  position: relative;
  z-index: 1;
}

.print-card .card-effect em {
  font-style: normal;
  font-weight: 600;
}

.print-card .card-effect .stat-inline-icon {
  width: 3.5mm;
  height: 3.5mm;
  vertical-align: middle;
  filter: brightness(0) saturate(100%);
  margin: 0 0.2mm;
}

.print-card .card-stats {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: 2.5mm;
  padding: 1mm 3mm 2mm;
  position: relative;
  z-index: 1;
}

.print-card .stat {
  display: flex;
  align-items: center;
  gap: 0.5mm;
}

.print-card .stat-icon {
  width: 4.5mm;
  height: 4.5mm;
  opacity: 0.85;
  display: flex;
  align-items: center;
}

.print-card .stat-icon img {
  width: 100%;
  height: 100%;
  display: block;
  filter: brightness(0) saturate(100%);
}

.print-card .stat-value {
  font-family: 'Cinzel Decorative', serif;
  font-size: 9pt;
  font-weight: 700;
  color: #2c1810;
}

/* -- Cards page controls -------------------------------------------------- */

.cards-controls {
  display: flex;
  align-items: center;
  gap: 1.5rem;
  justify-content: center;
  margin-bottom: 2rem;
}

.cards-controls button {
  font-family: 'Cinzel', serif;
  font-size: 1rem;
  padding: 0.6rem 1.5rem;
  background: var(--accent-gold, #c9a84c);
  color: var(--bg-dark, #1a1a1a);
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-weight: 600;
}

.cards-controls button:hover {
  filter: brightness(1.15);
}

.cards-controls label {
  font-family: 'Cinzel', serif;
  font-size: 0.9rem;
  color: var(--text-muted, #9a8c70);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.4rem;
}
